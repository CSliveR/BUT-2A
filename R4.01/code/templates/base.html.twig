<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta http-equiv="content-type" content="text/html; charset=UTF-8">
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<meta name="description" content="Démo SF">
		<meta name="author" content="UGA/IUT2/INFO">
		<link rel="icon" href="{{ asset('images/favicon.ico') }}">
		<title>
			{% block title %}
				TODO : définir contenu block title
			{%  endblock %}
		</title>
		<!-- CSS : Bootstrap, Fontawsome, projet (styles communs à tout le projet) -->
		<link href="{{ asset('css/bootstrap-4/bootstrap.min.css') }}" rel="stylesheet">
		<link href="{{ asset('css/fontawsome-5.all.min.css') }}" rel="stylesheet">
		<link href="{{ asset('css/projet.css') }}" rel="stylesheet">
		<!-- début du block css spécifique -->
		{% block css %}{%  endblock %}
		<!-- fin du block css -->
	</head>
	<body>
		<!-- début de la navbar -->
		{% include "navbar.html.twig" %}
		<!-- fin de la navbar -->
		<main role="main" class="container-fluid">
			<div class="row">
				<div class="col-md-10">
					<div class="main-div">
						<!-- début du block body -->
						{%  block body %}
							<h1>
								<i>TODO : définir contenu block body</i>
							</h1>
						{%  endblock %}
						<!-- fin du block body -->
					</div>
				</div>
				<div class="col-md-3" style="padding: 10px;">
					<div class="card">
						<div class="card-header text-center">
							<h5><i class="fas fa-star"></i> Top Ventes <i class="fas fa-star"></i></h5>
						</div>
						<div class="card-body text-muted text-center">
							{{ render(controller('App\\Controller\\BoutiqueController::topVentes')) }}
						</div>
					</div>
				</div>
			</div>
		</main>
		<!-- JS : JQuery, Bootstrap -->
		<script src="{{ asset('js/jquery-3/jquery.slim.min.js') }}"></script>
		<script src="{{ asset('js/bootstrap-4/bootstrap.bundle.min.js') }}"></script>
		<script>
			$(function () {
				// Activation tooltip bootstrap sur la page
				$('[data-toggle="tooltip"]').tooltip();
				// Script du bouton de recherche
				// TODO
				let searchField= document.querySelector("#searchString");
				let searchBtn = document.querySelector("#searchButton");

				searchBtn.addEventListener("click", (event) => {
					event.preventDefault();
					let encodeString = encodeURIComponent(searchField.value.trim());

					if(encodeString){
						window.location.href = "{{ path("app_boutique_chercher") }}" + "/" + encodeString;
					}else{
						window.location.href = "{{ path("app_boutique_chercher") }}";
					}
				});
			});
		</script>
		<!-- debut du block js spécifique -->
		{% block js %}{%  endblock %}
		<!-- fin du block js spécifique -->
	</body>
</html>
